# Windows PCでの動作確認手順

このガイドでは、Windows PCでGroove Samplerアプリケーションを動作確認する方法を説明します。

## 必要な環境

- **Node.js** (v18以上推奨)
- **npm** (Node.jsに含まれています)
- **Google Chrome** または **Microsoft Edge** (Web MIDI API対応ブラウザ)

## セットアップ手順

### 1. Node.jsのインストール確認

コマンドプロンプトまたはPowerShellを開き、以下のコマンドでNode.jsがインストールされているか確認します：

```bash
node --version
npm --version
```

もしインストールされていない場合は、[Node.js公式サイト](https://nodejs.org/)からダウンロードしてインストールしてください。

### 2. プロジェクトのクローン（まだの場合）

GitHubからプロジェクトをクローンしていない場合は、以下のコマンドでクローンします：

```bash
git clone <リポジトリのURL>
cd groove-sampler
```

### 3. 依存関係のインストール

プロジェクトのルートディレクトリで、以下のコマンドを実行します：

```bash
npm install
```

これにより、`package.json`に記載されているすべての依存関係がインストールされます。

### 4. 開発サーバーの起動

以下のコマンドで開発サーバーを起動します：

```bash
npm run dev
```

起動に成功すると、以下のようなメッセージが表示されます：

```
  VITE v6.x.x  ready in xxx ms

  ➜  Local:   http://localhost:5173/
  ➜  Network: use --host to expose
```

### 5. ブラウザでアクセス

1. **Google Chrome** または **Microsoft Edge** を開きます
2. アドレスバーに `http://localhost:5173` と入力してEnterキーを押します
3. アプリケーションが表示されます

## MIDI機能の使用

### MIDIデバイスの接続

1. MIDIコントローラーをUSBケーブルでPCに接続します
2. ブラウザでアプリケーションを開いた状態で、MIDIコントローラーを操作します
3. ブラウザがMIDIアクセスを要求する場合、**「許可」**をクリックします

### MIDI Learn機能の使い方

1. 任意のFaderコンポーネントの右上にある **「M」ボタン**をクリックします
   - ボタンが黄色で点滅し、学習モードになります
2. MIDIコントローラーの任意のノブやフェーダーを動かします
   - 自動的にマッピングが作成されます
   - 「M」ボタンが青色に変わり、マッピング済みであることを示します
3. 以降、そのMIDIコントロールを動かすと、対応するパラメータが制御されます

### マッピングの削除

マッピング済みのパラメータの「×」ボタンをクリックすると、MIDIマッピングを削除できます。

## トラブルシューティング

### ポートが使用されている場合

もしポート5173が既に使用されている場合、Viteは自動的に別のポート（5174など）を使用します。ターミナルに表示されるURLを確認してください。

### MIDIデバイスが認識されない場合

1. **ブラウザの確認**: ChromeまたはEdgeを使用しているか確認してください（FirefoxはWeb MIDI APIをサポートしていません）
2. **デバイスマネージャーの確認**: WindowsのデバイスマネージャーでMIDIデバイスが認識されているか確認してください
3. **ブラウザの再起動**: ブラウザを完全に閉じて再度開いてみてください
4. **MIDIアクセスの許可**: ブラウザの設定でMIDIアクセスがブロックされていないか確認してください

### 音が出ない場合

1. **オーディオコンテキストの初期化**: アプリケーションを開いた後、画面のどこかをクリックしてオーディオエンジンを初期化してください
2. **ブラウザの音量**: ブラウザのタブの音量がミュートになっていないか確認してください
3. **システムの音量**: Windowsの音量設定を確認してください

## 本番ビルド（オプション）

本番環境用にビルドする場合は、以下のコマンドを実行します：

```bash
npm run build
```

ビルドされたファイルは `dist` フォルダに生成されます。このフォルダの内容をWebサーバーにアップロードすることで、本番環境で使用できます。

ビルド結果をローカルで確認する場合は：

```bash
npm run preview
```

## その他のコマンド

- `npm run dev`: 開発サーバーを起動（ホットリロード対応）
- `npm run build`: 本番用にビルド
- `npm run preview`: ビルド結果をプレビュー

## 参考情報

- [Vite公式ドキュメント](https://vitejs.dev/)
- [Web MIDI API仕様](https://www.w3.org/TR/webmidi/)
- [React公式ドキュメント](https://react.dev/)
